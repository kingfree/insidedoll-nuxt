<script setup lang="ts">
/**
 * ä¾§è¾¹æ ç»„ä»¶ - å®Œæ•´çš„ç›®å½•å±‚çº§ç»“æ„
 */

const { isOpen, close } = useSidebar()

// å®Œæ•´çš„å¯¼èˆªæ ‘ç»“æ„
const navTree = [
  {
    label: 'ä¸»è¦é¡µé¢',
    icon: 'i-heroicons-home',
    children: [
      { label: 'ä¸»é¡µ', path: '/main', icon: 'i-heroicons-home' },
      { label: 'ç®€ä»‹', path: '/info', icon: 'i-heroicons-information-circle' },
      { label: 'æœ€æ–°æ¶ˆæ¯', path: '/wnew', icon: 'i-heroicons-bell' },
    ]
  },
  {
    label: 'å°è¯´ä½œå“',
    icon: 'i-heroicons-book-open',
    badge: '261',
    children: [
      {
        label: 'ãŠäººå½¢é”ã®å­¦åœ’',
        path: '/storyg1',
        icon: 'i-heroicons-academic-cap',
        badge: '2/19',
        children: [
          { label: '0G ç³»åˆ—', path: '/storyg1/0g', badge: '19' }
        ]
      },
      {
        label: 'ã¨ã‚“å¤ªçš„ä½œå“',
        path: '/story01',
        icon: 'i-heroicons-document-text',
        badge: '170',
        children: [
          { label: '01 ç³»åˆ—', path: '/story01/01' },
          { label: '02 ç³»åˆ—', path: '/story01/02' },
          { label: '03 ç³»åˆ—', path: '/story01/03' },
          { label: '04 ç³»åˆ—', path: '/story01/04' },
          { label: '05 ç³»åˆ—', path: '/story01/05' },
          { label: '06 ç³»åˆ—', path: '/story01/06' },
          { label: '07 ç³»åˆ—', path: '/story01/07' },
          { label: '08 ç³»åˆ—', path: '/story01/08' },
          { label: '09 ç³»åˆ—', path: '/story01/09' },
          { label: '0A ç³»åˆ—', path: '/story01/0a', badge: '70' },
          { label: '0B ç³»åˆ—', path: '/story01/0b' },
          { label: '0C ç³»åˆ—', path: '/story01/0c' },
          { label: '0D ç³»åˆ—', path: '/story01/0d' },
          { label: '0E ç³»åˆ—', path: '/story01/0e' },
          { label: '0F ç³»åˆ—', path: '/story01/0f' },
          { label: '0H ç³»åˆ—', path: '/story01/0h' },
          { label: '0I ç³»åˆ—', path: '/story01/0i' },
          { label: '0K ç³»åˆ—', path: '/story01/0k' },
          { label: '0L ç³»åˆ—', path: '/story01/0l' },
          { label: '0P ç³»åˆ—', path: '/story01/0p' },
          { label: '0R ç³»åˆ—', path: '/story01/0r' },
          { label: '0S ç³»åˆ—', path: '/story01/0s' },
          { label: '0V ç³»åˆ—', path: '/story01/0v' },
          { label: '0W ç³»åˆ—', path: '/story01/0w' },
          { label: '0X ç³»åˆ—', path: '/story01/0x' },
          { label: '0Y ç³»åˆ—', path: '/story01/0y' },
          { label: '0Z ç³»åˆ—', path: '/story01/0z' },
          { label: '10 ç³»åˆ—', path: '/story01/10' },
        ]
      },
      {
        label: 'æˆç”°å›çš„æ•…äº‹',
        path: '/storyn1',
        icon: 'i-heroicons-user',
        badge: '61',
        children: [
          { label: 'N1 ç« èŠ‚', path: '/storyn1/n1' },
          { label: 'N2 ç« èŠ‚', path: '/storyn1/n2' },
          { label: 'N3 ç« èŠ‚', path: '/storyn1/n3' },
          { label: 'N4 ç« èŠ‚', path: '/storyn1/n4' },
          { label: 'N5 ç« èŠ‚', path: '/storyn1/n5' },
          { label: 'N6 ç« èŠ‚', path: '/storyn1/n6' },
          { label: 'N7 ç« èŠ‚', path: '/storyn1/n7' },
          { label: 'N8 ç« èŠ‚', path: '/storyn1/n8' },
          { label: 'N9 ç« èŠ‚', path: '/storyn1/n9' },
          { label: 'NA ç« èŠ‚', path: '/storyn1/na' },
          { label: 'NB ç« èŠ‚', path: '/storyn1/nb' },
          { label: 'NC ç« èŠ‚', path: '/storyn1/nc' },
          { label: 'ND ç« èŠ‚', path: '/storyn1/nd' },
          { label: 'NE ç« èŠ‚', path: '/storyn1/ne' },
        ]
      },
      {
        label: 'ç¾½ç”°å›çš„æ•…äº‹',
        path: '/storyh1',
        icon: 'i-heroicons-user-circle',
        badge: '11',
        children: [
          { label: 'H0 ç« èŠ‚', path: '/storyh1/h0', badge: '11' }
        ]
      }
    ]
  },
  {
    label: 'å•ç¯‡æ•…äº‹',
    icon: 'i-heroicons-document',
    badge: '185',
    children: [
      { label: '02 ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: '05 ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: '06 ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: '07 ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: '08 ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: '09 ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: '0A ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: '0C-0S ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: 'N8 ç³»åˆ—', icon: 'i-heroicons-document-text' },
      { label: 'NC-ND ç³»åˆ—', icon: 'i-heroicons-document-text' },
    ]
  },
  {
    label: 'è®¿è°ˆ & äº’åŠ¨',
    icon: 'i-heroicons-chat-bubble-left-right',
    badge: '185',
    children: [
      { label: 'è®¿è°ˆå­˜æ¡£', path: '/intvarc', badge: '176', icon: 'i-heroicons-archive-box' },
      { label: 'è®¿è°ˆç´¢å¼•', badge: '9', icon: 'i-heroicons-list-bullet' }
    ]
  },
  {
    label: 'å…¶ä»–å†…å®¹',
    icon: 'i-heroicons-ellipsis-horizontal-circle',
    children: [
      { label: 'ä¸“æ ', path: '/column', icon: 'i-heroicons-newspaper' },
      { label: 'åŒäººå°è¯´', path: '/novel_info_main', icon: 'i-heroicons-book-open' },
      { label: 'é“¾æ¥', path: '/link', icon: 'i-heroicons-link' },
      { label: 'åšå®¢', path: '/blog', icon: 'i-heroicons-rss', badge: '1' },
    ]
  }
]
</script>

<template>
  <!-- ä¾§è¾¹æ  -->
  <Transition
    enter-active-class="transition-transform duration-300 ease-out"
    enter-from-class="-translate-x-full"
    enter-to-class="translate-x-0"
    leave-active-class="transition-transform duration-300 ease-in"
    leave-from-class="translate-x-0"
    leave-to-class="-translate-x-full"
  >
    <aside
      v-if="isOpen"
      class="fixed left-0 top-16 h-[calc(100vh-4rem)] w-80 border-r border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 overflow-y-auto z-40 shadow-lg"
    >
      <div class="p-4">
        <!-- å¯¼èˆªæ ‡é¢˜ -->
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
            ğŸ“š ç›®å½•å¯¼èˆª
          </h2>
          <UButton
            icon="i-heroicons-x-mark"
            size="xs"
            color="gray"
            variant="ghost"
            @click="close"
            aria-label="å…³é—­ä¾§è¾¹æ "
          />
        </div>

        <!-- å¯¼èˆªæ ‘ -->
        <nav class="mb-6">
          <NavTree :items="navTree" />
        </nav>

        <USeparator class="my-4" />

        <!-- ç¿»è¯‘è¿›åº¦ -->
        <div class="bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4">
          <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center">
            <UIcon name="i-heroicons-chart-bar" class="w-4 h-4 mr-2" />
            ç¿»è¯‘è¿›åº¦
          </h3>
          <div class="space-y-3">
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600 dark:text-gray-400">æ€»æ–‡ä»¶æ•°</span>
              <span class="font-medium text-gray-900 dark:text-gray-100">651</span>
            </div>
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600 dark:text-gray-400">å·²ç¿»è¯‘</span>
              <UBadge color="green" variant="subtle">2</UBadge>
            </div>
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600 dark:text-gray-400">å¾…ç¿»è¯‘</span>
              <span class="font-medium text-gray-900 dark:text-gray-100">649</span>
            </div>

            <!-- è¿›åº¦æ¡ -->
            <div class="pt-2">
              <div class="flex items-center justify-between text-xs mb-1">
                <span class="text-gray-500 dark:text-gray-400">å®Œæˆåº¦</span>
                <span class="font-medium text-primary-600 dark:text-primary-400">0.31%</span>
              </div>
              <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden">
                <div
                  class="bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-500"
                  style="width: 0.31%"
                />
              </div>
            </div>
          </div>
        </div>

        <USeparator class="my-4" />

        <!-- å¿«æ·é“¾æ¥ -->
        <div>
          <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center">
            <UIcon name="i-heroicons-link" class="w-4 h-4 mr-2" />
            é¡¹ç›®èµ„æº
          </h3>
          <div class="space-y-1">
            <UButton
              to="https://github.com"
              target="_blank"
              icon="i-heroicons-code-bracket"
              variant="ghost"
              color="gray"
              size="sm"
              block
              class="justify-start"
            >
              GitHub ä»“åº“
            </UButton>
            <UButton
              icon="i-heroicons-document-text"
              variant="ghost"
              color="gray"
              size="sm"
              block
              class="justify-start"
            >
              ç¿»è¯‘æŒ‡å—
            </UButton>
            <UButton
              icon="i-heroicons-map"
              variant="ghost"
              color="gray"
              size="sm"
              block
              class="justify-start"
            >
              ç½‘ç«™ç»“æ„
            </UButton>
          </div>
        </div>
      </div>
    </aside>
  </Transition>

  <!-- é®ç½©å±‚ï¼ˆç§»åŠ¨ç«¯ï¼‰ -->
  <Transition
    enter-active-class="transition-opacity duration-300"
    enter-from-class="opacity-0"
    enter-to-class="opacity-100"
    leave-active-class="transition-opacity duration-300"
    leave-from-class="opacity-100"
    leave-to-class="opacity-0"
  >
    <div
      v-if="isOpen"
      class="fixed inset-0 bg-black/50 z-30 lg:hidden"
      @click="close"
    />
  </Transition>
</template>
